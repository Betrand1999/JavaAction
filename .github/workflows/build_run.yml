name: Dependent Workflow

on:
  workflow_run:
    workflows: [ "Ensure that Java and Maven are installed.","Ensure that Port 80 is not in a running state." ]
    types:
      - completed

jobs:
  build_run:
    name: "Compile and Execute a Java Maven Dependency Project"
    runs-on: self-hosted
    steps:
      - name: "Checkout code"
        uses: actions/checkout@v3
      - name: "Build with Maven"
        run: mvn -B package --file pom.xml
      - name: "Run the project in the background using the JVM with the command 'java -jar target/..SNAPSHOT.war'."
        run: echo "${{ secrets.SUDO_PASSWORD }}" | sudo -S java -jar target/MSB-0.0.1-SNAPSHOT.war &
